(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[66],{4308:function(e,t,i){"use strict";i.r(t),i.d(t,{page:function(){return O},site:function(){return b}});var a,n=i(31191),o=i(43757),s=i(61049),r=i(77747);!function(e){e.SM="SM",e.Pass="PASS",e.NONE="NONE"}(a||(a={}));const u=(0,o.ff)([(0,o.t6)(s.jC,r.u),(0,o.t6)(s.R9,r.u),(0,o.t6)(s.Wf,r.u)],((e,t,i)=>({handle(o){return(0,n.mG)(this,void 0,void 0,(function*(){if(o.pageJsonFileName)return o;const n=o.pageId,{pagesMap:s,loginAndNavigate:r}=i.get();if(s[n])return Object.assign(Object.assign({},o),{pageJsonFileName:s[n]});const u=(i=>{const n=e.pagesSecurity[i];return n&&n.requireLogin?a.SM:t.passwordProtected[i]||n&&n.passwordDigest?a.Pass:a.NONE})(n);return u===a.NONE&&((e,t)=>{throw new Error(`we do not have authentication info for protected page ${e} page security: ${t}`)})(n,e.pagesSecurity[n]),r(o,u),null}))}})));var d=i(19238),c=i(95848),g=i(2811),p=i(27531),f=i(26513),l=i(5096),v=i(82627);const P=(0,o.ff)([(0,o.t6)(s.Wf,r.u),(0,o.t6)(s.R9,r.u),(0,o.t6)(s.jC,r.u),d.F0,f.jj,(0,o.jt)(g.n9),(0,o.jt)(p.RC),l.EE,v.O],((e,{publicPageIds:t},{customNoPermissionsPageUrl:i,customNoPermissionsPageId:o},s,r,u,d,g,p)=>{const f=(e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){return e===a.SM?(0,n.mG)(void 0,void 0,void 0,(function*(){let e;if(u)if(p["specs.thunderbolt.newAuthorizedPagesFlow"]){if(e=yield u.requestAuthorizedPages(),e.success)return{authorizedPagesMap:e.pages}}else if(e=yield u.requestAuthentication({}),e.success)return{authorizedPagesMap:yield u.authorizeMemberPagesByToken(e.token)};return{authorizedPagesMap:{},authenticationResult:e}})):(e=>(0,n.mG)(void 0,void 0,void 0,(function*(){return d?d.promptPasswordDialog(e):{authorizedPagesMap:{}}})))(t)})),l=(e,t,a=!1)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(i&&a)return s.navigate(`${i}?appSectionParams={"restrictedPageId":"${e}"}`);if(u&&"SM"===t){const e=()=>{r.isLandingOnProtectedPage()&&s.navigate("./")};return u.showNoPermissionsToPageDialog(e),!1}return!!r.isLandingOnProtectedPage()&&s.navigate("./")})),v=(i,a)=>(0,n.mG)(void 0,void 0,void 0,(function*(){const n=i.pageId;try{const{authorizedPagesMap:u,authenticationResult:d}=yield f(a,n);if(e.update((e=>Object.assign(Object.assign({},e),{pagesMap:Object.assign(e.pagesMap,u)}))),(null==d?void 0:d.reason)===c.$9.CANCELED)return!!r.isLandingOnProtectedPage()&&s.navigate("./");if(u[n])return s.navigate(i.parsedUrl.href);{const e=t.includes(o),i=!!u[o];return l(n,a,e||i)}}catch(e){return g.captureError(e,{tags:{feature:"protectedPage"}}),l(n,a)}}));return e.update((()=>({loginAndNavigate:v,pagesMap:{}}))),{appWillMount:()=>(0,n.mG)(void 0,void 0,void 0,(function*(){}))}}));var h=i(59032),M=i(95793);const m=(0,o.ff)([(0,o.t6)(s.Wf,r.u),g.n9],((e,t)=>({getTpaHandlers(){return{authorizeMemberPages:()=>(0,n.mG)(this,void 0,void 0,(function*(){const i=yield t.authorizeMemberPagesByCookie();e.update((e=>Object.assign(Object.assign({},e),{pagesMap:Object.assign(Object.assign({},e.pagesMap),i)})))}))}}}))),b=e=>{e(d.BD.Protected).to(u),e(h.j.AppWillMountHandler).to(P)},O=e=>{e(M.g).to(m)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/protectedPages.b58f46e8.chunk.min.js.map