(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[7955],{12073:function(e,t,i){"use strict";i.d(t,{$E:function(){return s},$H:function(){return p},Xr:function(){return d}});var n=i(43757),o=i(5096),r=i(98118);const a={},s="TPA_PUB_SUB_";function p(e){const t=new RegExp(`^${s}`);return e.replace(t,"")}const d=(0,n.ff)([o.ZQ,r.ku],((e,t)=>{function i(e,t){const i={persistentData:[],listeners:{}};return a[e]?a[e][t]||(a[e][t]=i):a[e]={[t]:i},a[e][t]}function n(e){Object.keys(a).forEach((t=>{Object.keys(a[t]).forEach((n=>{const o=i(t,n);Object.entries(o.listeners).forEach((([t,i])=>{Object.keys(i).forEach((i=>{e(i,t)&&delete o.listeners[t][i]}))}))}))}))}return{publish(e,t,n){const o=p(n.eventKey),r=n.isPersistent,a=i(e,o),s=a.listeners;if(Object.entries(s).forEach((([e,i])=>Object.keys(i).forEach((i=>{s[e][i].forEach((e=>e({data:n.eventData,name:o,origin:t})))})))),r){const e=n.eventData;a.persistentData.push({name:o,data:e})}},subscribe(e,n,o,r){const a=p(o.eventKey),s=i(e,a);s.listeners[t]||(s.listeners[t]={}),s.listeners[t][n]?"worker"===n&&s.listeners[t][n].push(r):s.listeners[t][n]=[r],o.isPersistent&&s.persistentData.length&&r({data:s.persistentData[0].data,name:a,origin:n},!0)},unsubscribe(e,t,n){const o=i(e,p(n));Object.keys(o.listeners).forEach((e=>{delete o.listeners[e][t]}))},handleIframeSubscribe(t,i,{eventKey:n,isPersistent:o,callId:r}){this.subscribe(t,i,{eventKey:n,isPersistent:o},((t,o=!1)=>{!function(e,t,i){const n=i.document.getElementById(e);if(!n)return;const o=n.getElementsByTagName("iframe")[0];o&&o.contentWindow&&o.contentWindow.postMessage(JSON.stringify(t),"*")}(i,o?{intent:"TPA_RESPONSE",callId:r,type:"registerEventListener",res:{drain:!0,data:[t]},status:!0,compId:i}:{eventType:n,intent:"addEventListener",params:t},e)}))},clearListenersBesideStubs(){n(((e,i)=>!e.includes("tpapopup")&&!e.includes("tpaWorker")&&i===t&&"masterPage"!==i))},clearListenersByCompId(e){n((t=>t===e))}}}))},6101:function(e,t,i){"use strict";i.r(t),i.d(t,{SiteMapSymbol:function(){return l.Cc},TpaEventsListenerManagerSymbol:function(){return l.PV},TpaFullScreenModeSymbol:function(){return l.u5},TpaModalSymbol:function(){return l.R3},TpaPopupSymbol:function(){return l.jn},TpaSymbol:function(){return l.e4},name:function(){return l.u2},page:function(){return xi}});var n=i(59032),o=i(95793),r=i(5096),a=i(31191),s=i(43757),p=i(61049),d=i(55048),l=i(7259),u=i(20140);const c="_rtby_",g={buildRuntimeCompId:(e,t)=>`${e}_rtby_${t}`,isRuntimeCompId:e=>e.split(c).length>1,getOriginCompId(e){const[t,i]=e.split(c);return i||t}};var m=i(37793),f=i(54163);const h=Symbol("TPA_HANDLER_EMPTY_RESPONSE"),I={WIX_CHAT:"14517e1a-3ff0-af98-408e-2bd6953c36a2",WIX_RESTAURANTS:"13e8d036-5516-6104-b456-c8466db39542"},v="PageLink",P="ExternalLink",y="AnchorLink",T="EmailLink",w="PhoneLink",b="WhatsAppLink",C="DocumentLink",S="DynamicPageLink",O="AddressLink",D="MenuHeader",x=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),(0,s.fi)(o.g),d.xP,r.ZQ,r.Zr,(0,s.jt)(f.m),(0,s.jt)(m.KO)],((e,t,i,n,o,{mode:{debug:r}},s,p)=>{const{appsClientSpecMapData:d}=e,l=({tpa:e,origin:i,callId:n,status:o,res:r,compId:a})=>{const s={callId:n,intent:"TPA_RESPONSE",status:o,res:r};p&&p.tpa.addMessage({message:s,compId:a,contextId:t.pageId,origin:i}),e.postMessage(JSON.stringify(s),"*")},u=Object.assign({},...i.map((e=>e.getTpaHandlers())));return{handleMessage({source:i,origin:o,message:p}){return(0,a.mG)(this,void 0,void 0,(function*(){const{type:a,callId:c,compId:m,data:f,deviceType:I,originFrame:v}=p,P=(e=>{var t,i;const o=(null===(t=n.get(e))||void 0===t?void 0:t.src)||(null===(i=n.get(e))||void 0===i?void 0:i.url);return o?new URL(o):null})(m);if("https://static.parastorage.com"!==o&&!((e,t)=>(null==e?void 0:e.origin)===t)(P,o)&&!(e=>"https://editor.wix.com"===e||"https://create.editorx.com"===e||"https://blocks.wix.com"===e)(o)&&!(e=>"https://v3-170-0-dot-wixlabs-wix-faq-11.uc.r.appspot.com"===e)(o))return void(r&&console.warn("discarded tpa message: untrusted origin",{origin:o,message:p}));const y=u[a];if(!y)return void(r&&console.warn(`TpaHandlerError: ${a} handler is not implemented`));const T=g.getOriginCompId(m),w=t.widgets[T],b=null==s?void 0:s.isTpaWorker(m),C=b?s.getWorkerDetails(m):null,S=b?C.appDefinitionId:null==w?void 0:w.appDefinitionId,O=y(m,f,{callId:c,tpa:i,appDefinitionId:S,tpaCompData:w,appClientSpecMapData:d[S],originCompId:T,viewMode:e.viewMode});if(void 0!==O)try{const e=yield O;if(e===h)return;l({tpa:i,origin:o,callId:c,compId:m,status:!0,res:e})}catch(e){const{message:t,name:n,stack:r}=e;l({tpa:i,origin:o,callId:c,compId:m,status:!1,res:{error:{message:t,name:n,stack:r}}})}}))}}}));var R=i(29203);const E=(0,s.ff)([(0,s.t6)(p.$e,l.u2),R.e,l.PV],((e,t,i)=>{let n=()=>{};const o=t=>{Object.entries(e.widgets).forEach((e=>{i.dispatch("CONSENT_POLICY_UPDATE",(()=>t),{compId:e[0]})}))};return{pageDidMount(){n=t.registerToChanges(o)},pageDidUnmount(){n()}}}));var M=i(82627);const A=({tpaModal:e,tpaPopup:t,compId:i="",onCloseMessage:n})=>{t.isPopup(i)?t.closePopup(i,n):e.closeModal(n)},L=(0,s.ff)([l.R3,l.jn,M.O],((e,t,i)=>({getTpaHandlers:()=>({onEscapeClicked:n=>{i["specs.thunderbolt.closeWindowOnEscPress"]&&A({tpaModal:e,tpaPopup:t,compId:n})}})})));var k=i(50287);const j=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.jt)(k.d)],(({externalBaseUrl:e},t)=>({getTpaHandlers:()=>({getCustomizedUrlSegments(n,o){return(0,a.mG)(this,void 0,void 0,(function*(){const{url:n,options:r}=o,a=null==t?void 0:t.urlMappings,{getCustomizedUrlSegments:s}=yield i.e(7482).then(i.bind(i,47194));return s(a,n,Object.assign({baseUrl:e},r))}))}})}))),$=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.jt)(k.d)],(({externalBaseUrl:e},t)=>({getTpaHandlers:()=>({buildCustomizedUrl(n,o){return(0,a.mG)(this,void 0,void 0,(function*(){const{key:n,itemData:r,options:a}=o,s=null==t?void 0:t.urlMappings,{buildCustomizedUrl:p}=yield i.e(7482).then(i.bind(i,47194));return p(s,n,r,Object.assign({baseUrl:e},a))}))}})})));var U=i(16684),_=i.n(U);const H=/(?:\+|\()?\d(?:[-.() \t\u00a0\u1680\u180e\u2000\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]{0,5}\d){6,16}\)?(?![<@)\w])|\*\d{4}(?![<@)\w])/,N=/(^|[\s:;,<>])([A-Z0-9][A-Z0-9._%+-]+@[A-Z0-9][A-Z0-9.-]+\.[A-Z]{2,})(?=$|[\s:;,<>])/i,B=/(^|[\s:;,<>])((?:https?:\/\/|www\.)[a-z0-9](?:\.?[a-z0-9\-%_])*(?:(?:\\|\/)[a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%]*)?)(?=$|[^a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%])/i,F=new RegExp(/(?:^|[\s:;,<>])(?:\+|\()?\d(?:[-.() \t\u00a0\u1680\u180e\u2000\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]{0,5}\d){6,16}\)?(?![<@)\w])|\*\d{4}(?![<@)\w])/,"g"),G=/([A-Z0-9][A-Z0-9._%+-]+@[A-Z0-9][A-Z0-9.-]+\.[A-Z]{2,})/gi,V=/((?:https?:\/\/|www\.)[a-z0-9](?:\.?[a-z0-9\-%_])*(?:(?:\\|\/)[a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%]*)?)/gi,W="PHONE",z="MAIL",Z="URL",Q=e=>0===e.toLowerCase().indexOf("http")?e:`http://${e}`,K=[" ",":",";",",","<",">"],X={[W]:e=>{const t=e.match(H);return t&&{key:t[0],value:t[0].match(/[*\d]/g).join(""),index:t.index,pattern:W}},[z]:e=>{const t=e.match(N);if(t){const e=t[1].length,i=t[2];return{key:i,value:i,index:t.index+e,pattern:z}}return null},[Z]:e=>{const t=e.match(B);if(t){const e=t[2],i=t[1].length;return{key:e,value:Q(e),index:t.index+i,pattern:Z}}return null}};const q={[W]:"tel:",[z]:"mailto:",[Z]:""},J=(e,t)=>{const i=function(e,t={}){if(!e)return null;const i=Object.keys(t).filter((e=>t[e])).map((t=>X[t](e))).filter((e=>null!==e));return i[0]?i.reduce(((e,t)=>t.index<e.index?t:e),i[0]):null}(e,{MAIL:!0,URL:!0,PHONE:t});return i&&(({pattern:e,value:t})=>{const i=e===Z?{target:"_blank"}:{};return Object.assign(Object.assign({},i),{href:`${q[e]}${t}`})})(i)},Y=e=>t=>{let i="";const n=t.trim();switch(e){case"email":i=`href="mailto:${n}"`;break;case"phone":i=`href="tel:${n}"`;break;case"url":i=`href="${Q(n)}" target="_blank"`}return`<a data-auto-recognition="true" ${i}>${t}</a>`},ee=Y("email"),te=Y("url"),ie=Y("phone"),ne=(e,t)=>(i,n)=>{if(!n||!t&&n.startsWith("&lt;"))return i;let o=(r=ee,n.replace(G,r));var r;return o=((e,t)=>e.replace(V,t))(o,te),e&&(o=((e,t)=>e.replace(F,(e=>{const i=K.find((t=>t===e[0]));return i?i+t(e.substring(1,e.length)):t(e)})))(o,ie)),i.split(n).join(o)};const oe=({recipient:e,subject:t,body:i})=>{const n=Object.entries({subject:t,body:i}).filter((([,e])=>e)).map((([e,t])=>`${e}=${t}`)).join("&");return`mailto:${e}${n.length>0?`?${n}`:""}`},re=({phoneNumber:e})=>`tel:${e}`,ae=({docId:e,name:t,indexable:i},n,o,r,a,s,p)=>{const d=e.endsWith("pdf")&&s&&a&&(e=>{const t=new URL(e).hostname;return!t.endsWith(".wixsite.com")&&!t.endsWith(".editorx.io")})(r)?p?new URL("_files",new URL(r)):new URL("_files",new URL(r).origin):`https://${n}.${o}`,l=e.includes("/")?e:`ugd/${e}`;var u;return`${d}${l.startsWith("/")?l:`/${l}`}${e.endsWith(".pdf")?i?"?index=true":"":`?${u={dn:t},Object.keys(u).map((e=>`${e}=${encodeURIComponent(u[e])}`)).join("&")}`}`};var se=i(73487);const pe=/^\/([^ ?#]*)?[#]?([^ ?#]*)[?]?(.*)/,de=/^#([^ ?]*)[?]?(.*)/,le=/^(http|https):\/\/(.*)/,ue=/^wix:document:\/\/v1\/(.+)\/(.+)/,ce=/^document:\/\/(.*)/,ge={top:"SCROLL_TO_TOP",bottom:"SCROLL_TO_BOTTOM"},me=e=>le.test(e),fe=(e,t)=>{if(e){const[i]=t.replace("#","/#").split(/[/]+/),n=Object.values(e).filter((e=>e.prefix===i));return 1===n.length}return!1},he=(e,t)=>{const i=_().findKey(e.routes,(e=>{if("Dynamic"===e.type){return(e.pageIds||[]).includes(t)}return e.pageId===t}));if(i)return ve(i);throw new Error(`No url route for pageId: ${t}`)};class Ie extends Error{constructor(){super("Unsupported link type"),this.name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(this,Ie)}}const ve=e=>e.replace(/^\.\//,"/"),Pe=e=>["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"].includes(e),ye=({routingInfo:e,metaSiteId:t,userFileDomainUrl:i,popupPages:n,getCompIdByWixCodeNickname:o,getRoleForCompId:r,routersConfig:a,multilingualInfo:s,isMobileView:p,isPremiumDomain:d,experiments:l})=>{const u=`https://${t}.${i}/`,c=e=>!!n&&n[e],g=(e,t="")=>`wix:document://v1/${e}/${t}`,m=e=>{var t;const[,i="",n="",o=""]=pe.exec(e),r=new URLSearchParams(o);return(null==s?void 0:s.isOriginalLanguage)||"QueryParam"!==(null===(t=null==s?void 0:s.currentLanguage)||void 0===t?void 0:t.resolutionMethod)||r.set("lang",s.currentLanguage.languageCode),{relativePageUrlPrefix:i,anchor:n,queryString:r.toString()}},f=(t,i="_self")=>{const{relativePageUrlPrefix:n="",anchor:r="",queryString:s}=m(t),p=ge[r]||r;if(c(n))return{type:"PageLink",href:"",target:"_self",linkPopupId:n};const d=e.externalBaseUrl;let l,u,g;if(fe(a,n)){g=`./${n}`===e.relativeUrl,l="DynamicPageLink",u=`${d}/${n}`}else{const[t,...i]=n.split("/"),o=i.length>0?`/${i.join("/")}`:"",r=decodeURIComponent(t),a=`./${r}`,s="./"===a?{pageId:e.mainPageId}:e.routes[a];l="PageLink",u=(null==s?void 0:s.pageId)===e.mainPageId&&!o?d:`${d}/${r}${o}`,g=s&&s.pageId===e.pageId}const f=p&&o&&o(p),h=g&&f,I=p&&!h;return Object.assign(Object.assign({href:`${u}${s?`?${new URLSearchParams(s).toString()}`:""}`,target:i,type:l},h&&{anchorCompId:f}),I&&{anchorDataId:p})};return{isAbsoluteUrl:me,isDynamicPage:e=>{const{relativePageUrlPrefix:t}=m(e);return fe(a,t)},getImpliedLink:e=>J(e,p),getImpliedLinks:(e,t)=>function(e,t,{parseEscaped:i}={parseEscaped:!1}){return e.replace(/>((?![<>]).+?)<|(?:<a.*>.*<\/a>)/g,ne(t,i))}(e,p,t),getLink:({href:t="",linkPopupId:i,anchorCompId:n="",anchorDataId:o="",docInfo:a,type:s}={})=>{if(i)return`/${i}`;if((0,se.r5)(t))return t;if((e=>e.startsWith(u))(t))return g(a.docId,a.name);if(Pe(o))return`#${_().invert(ge)[o]}`;if("ExternalLink"===s)return t;const[p]=t.split("?"),d=(null==r?void 0:r(n,"wixCode"))||o,l=d?`#${d}`:"",c=p===e.externalBaseUrl?(()=>{const t=_().findKey(e.routes,(t=>t.pageId===e.mainPageId));return ve(t)})():(t=>t.replace(e.externalBaseUrl,""))(p);return`${c}${l}`},getLinkProps:(n,o)=>{if(r=n,de.test(r)){const t=ve(e.relativeUrl);return f(`${t}${n}`,o)}var r;if((e=>pe.test(e))(n))return f(n,o);if((0,se.r5)(n))return(e=>{const[,t,i]=se.eu.exec(e),n=_().escape(t),o=_().escape(i);return{type:"EmailLink",href:oe({recipient:n,subject:o}),target:"_self"}})(n);if((0,se.J1)(n))return(e=>{const[,t]=se.D5.exec(e);return{type:"PhoneLink",href:re({phoneNumber:t}),target:"_self"}})(n);if(me(n))return((e,t="_blank")=>({type:"ExternalLink",href:e,target:t,rel:"noopener noreferrer"}))(n,o);if((e=>ue.test(e)||ce.test(e))(n))return(n=>{const[,o,r]=ue.exec(n)||ce.exec(n),a=!0===l["specs.thunderbolt.premiumDocumentLink"],s=!0===l["specs.thunderbolt.excludeOriginForAllPremiumDomain"];return{type:"DocumentLink",href:ae({docId:o,name:r||"",indexable:!1},t,i,e.externalBaseUrl,d,a,s),target:"_blank",docInfo:{docId:o,name:r}}})(n);throw new Ie},getLinkUrlFromDataItem:t=>{const i={AnchorLink:()=>{const{anchorDataId:i,pageId:n}=t,o=Pe(i)?e.pageId:n.replace(/^#/,""),r=i.startsWith("#")?i:`#${i}`;return`${he(e,o)}${r}`},DocumentLink:()=>{const{docId:e,name:i}=t;return g(e,i)},ExternalLink:()=>{const{url:e}=t;return e},DynamicPageLink:()=>{const{routerId:i,innerRoute:n,anchorDataId:o="",isTpaRoute:r}=t,s=r?he(e,i):`/${a[i].prefix}`,p=n?(e=>{const[t,i]=e.split("?");if(i){const e=encodeURIComponent(`?${i}`);return t?`${t}${e}`:e}return t})(n):n;return`${s}${p?`/${p}${o}`:o}`},PageLink:()=>{const{pageId:i}=t,n=(("string"==typeof i?i:i.id)||"").replace(/^#/,"");return c(n)?`/${n}`:n===e.mainPageId?"/":he(e,n)},PhoneLink:()=>re(t),EmailLink:()=>oe(t)}[t.type];if(i)return i();throw new Error("Provided link type is not supported")}}};var Te=i(19238),we=i(23228),be=i(88902);const Ce=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),(0,s.t6)(p.jC,l.u2),Te.kc,(0,s.jt)(we.wk),(0,s.jt)(be.HC)],((e,t,i,n,o,r)=>({getTpaHandlers:()=>({getStateUrl(a,s,{originCompId:p}){const{metaSiteId:d,userFileDomainUrl:l,routersConfig:u,appsClientSpecMapByApplicationId:c,externalBaseUrl:g,isMobileView:m,isPremiumDomain:f,experiments:h}=e,I=ye({routingInfo:n.getLinkUtilsRoutingInfo(),metaSiteId:d,userFileDomainUrl:l,routersConfig:u,popupPages:null==o?void 0:o.getPopupPages(),multilingualInfo:null==r?void 0:r.getMultilingualInfo(),isMobileView:m,isPremiumDomain:f,experiments:h}),v=_()(i.pagesData).groupBy("tpaApplicationId").mapValues((e=>e.map((e=>e.id)))).value(),P=Object.entries(i.pagesData).map((([e,t])=>({[t.tpaPageId]:e}))).reduce(_().assign),{state:y,sectionId:T}=s,w=(b=p,t.widgets[b].applicationId);var b;const C=c[w],S=v[w];if(!S||0===S.length)return{error:{message:`Page with app "${C.appDefinitionName}" was not found.`}};const O={type:"DynamicPageLink",routerId:P[T]||S[0],isTpaRoute:!0,innerRoute:y},D=I.getLinkUrlFromDataItem(O);return I.isDynamicPage(D)?{error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}}:{url:`${g}${D}`}}})}))),Se=(0,s.ff)([(0,s.t6)(p.$e,l.u2)],(({widgets:e})=>({getTpaHandlers:()=>({getStyleParamsByStyleId(t,i){const n=Object.values(e).find((e=>e.styleId===i.styleId)),o=null==n?void 0:n.style;return o?Object.assign({},o):{error:{message:`Style id "${i.styleId}" was not found.`}}}})})));var Oe=i(49574),De=i(56405),xe=i(81600);const Re=(0,s.ff)([r.Zr,(0,s.t6)(p.R9,u.u2),De.X,r.ZQ,Oe.U],((e,{externalBaseUrl:t},i,n,o)=>{const r=e=>Object.assign({activityDetails:{additionalInfoUrl:null,summary:""},activityInfo:"activityInfo",activityType:"activityType",contactUpdate:{},activityLocationUrl:n.location.href,createdAt:(new Date).toISOString()},e),s=((e,t)=>i=>{const n=new URL(t);return Object.entries(i.params).forEach((([e,t])=>{t&&n.searchParams.append(e,t)})),e.envFetch(n.href,{method:"POST",body:JSON.stringify(i.payload),headers:{"Content-Type":"application/json"}})})(o,`${t}/_api/app-integration-bus-web/v1/activities`);return{getTpaHandlers:()=>({postActivity:(0,xe.u)(["site"],((t,{activity:n},{appDefinitionId:o})=>{var p;return(e=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=yield s(e);if(!t.ok)return{status:!1,response:{status:t.status,statusText:t.statusText,responseText:yield t.text()}};const{userSessionToken:n,activityId:o,contactId:r}=yield t.json();return n&&i.setUserSession(n),{status:!0,response:{activityId:o,contactId:r}}})))({params:(p={"application-id":o||"TPA",instance:i.getAppInstanceByAppDefId(o)},Object.assign({hs:i.getHubSecurityToken(),"activity-id":"xxxxxxxx".replace(/x/g,(()=>(16*Math.random()|0).toString(16))),"metasite-id":e.site.metaSiteId,svSession:i.getUserSession(),version:"1.0.0"},p)),payload:r({contactUpdate:n.contactUpdate||{},activityInfo:n.info||{},activityType:n.type||"TPA",activityDetails:n.details||{}})})}))})}})),Ee=(0,s.ff)([De.X],(e=>({getTpaHandlers:()=>({getCtToken:()=>e.getCtToken(),getUserSession:()=>e.getUserSession()})})));var Me=i(26513);const Ae=(0,s.ff)([Te.Iz,Me.jj,(0,s.t6)(p.R9,u.u2)],((e,t,{routersByPrefix:i})=>({getTpaHandlers:()=>({getCurrentPageNavigationInfo(){const n=e.getRelativeUrl(),{type:o,pageId:r}=t.getCurrentRouteInfo();if("Static"===o)return{type:"PageLink",pageId:r};const[,a,...s]=n.split("/"),{routerId:p}=i[a];return{type:"DynamicPageLink",routerId:p,innerRoute:s.join("/")||"/"}}})}))),Le=(0,s.ff)([r.ZQ],(e=>({getTpaHandlers:()=>({getAdsOnPage(){const t=e.document.getElementById("WIX_ADS");if(!t)return{};const{height:i,width:n,x:o,y:r}=t.getBoundingClientRect();return{top:{height:i,width:n,top:r,left:o}}}})})));var ke=i(60091),je=i(95100);const $e=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),r.Zr,Me.jj,d.xP,ke.q,l.PV,Te.kc,(0,s.jt)(we.wk),(0,s.jt)(je.Ai),(0,s.jt)(be.HC)],((e,t,i,n,o,r,s,p,d,l,u)=>({getTpaHandlers(){const i=(t=p.getLinkUtilsRoutingInfo())=>{const{metaSiteId:i,userFileDomainUrl:n,routersConfig:o,isMobileView:r,isPremiumDomain:a,experiments:s}=e;return ye({routingInfo:t,metaSiteId:i,userFileDomainUrl:n,routersConfig:o,popupPages:null==d?void 0:d.getPopupPages(),multilingualInfo:null==u?void 0:u.getMultilingualInfo(),isMobileView:r,isPremiumDomain:a,experiments:s})},n=({compId:e,state:n,skipHistory:o,queryParams:s={},disableScrollToTop:d=!0})=>(0,a.mG)(this,void 0,void 0,(function*(){var a;const l=p.getLinkUtilsRoutingInfo(),u=i(l),{widgets:c}=t;if(!(null===(a=c[e])||void 0===a?void 0:a.isSection))return;const g={type:"DynamicPageLink",routerId:l.pageId,innerRoute:n,isTpaRoute:!0},m=`${u.getLinkUrlFromDataItem(g)}${_().isEmpty(s)?"":`?appSectionParams=${encodeURIComponent(JSON.stringify(s))}`}`,f=u.getLinkProps(m);yield r.navigateTo(f,{skipHistory:o,disableScrollToTop:d})}));return{replaceSectionState(e,{state:t,queryParams:i}){return(0,a.mG)(this,void 0,void 0,(function*(){return n({compId:e,skipHistory:!0,state:t,queryParams:i})}))},appStateChanged(e,{state:t}){return(0,a.mG)(this,void 0,void 0,(function*(){let a;try{a=JSON.parse(t)}catch(e){a=null}const s=t=>{const i=o.get(e).onItemClicked;i&&i({type:"itemClicked",itemIndex:t,item:o.get(e).images[t]})};if(!a)return n({compId:e,skipHistory:!1,state:t});{const t={zoom:()=>{const[t]=a.args,{id:i}=o.get(e).images[t];l.openImageZoom(e,i),s(t)},itemClicked:()=>{const[e]=a.args;s(e)},itemChanged:()=>{const[t]=a.args,i=o.get(e).onCurrentItemChanged;i&&i({type:"imageChanged",itemIndex:t,item:o.get(e).images[t]})},componentReady:()=>{o.update({[e]:{componentReady:!0}})},navigateToDynamicPage:()=>{const[e]=a.args,t=i(),n=(e=>!e.id&&!!(e.href||e.linkPopupId||e.anchorDataId||e.anchorCompId))(e)?e:t.getLinkProps(t.getLinkUrlFromDataItem(e));r.navigateTo(n)},navigateToAnchor:()=>{const[e,t]=a.args,n={type:"PageLink",pageId:"masterPage"===e?p.getLinkUtilsRoutingInfo().pageId:e,target:"_self"},o=i(),s=o.getLinkUrlFromDataItem(n),d=o.getLinkProps(s),l=Object.assign(d,t);r.navigateTo(l)}}[a.cmd];t&&t()}}))}}}})));var Ue=i(58629),_e=i(10666);const He=(0,s.ff)([(0,s.t6)(p.R9,u.u2),Ue.s,Me.jj,(0,s.jt)(Te.R1),(0,s.jt)(_e.$)],(({debug:e},t,i,n,o)=>({getTpaHandlers:()=>({applicationLoadingStep(r,a,{appDefinitionId:s,tpaCompData:{widgetId:p}={}}){if(g.isRuntimeCompId(r))return void(e&&console.warn(`applicationLoadingStep is ignored in runtime component ${r}`));const d=i.getCurrentRouteInfo(),l=Date.now()-t.initialRequestTimestamp,{stage:u,stageNum:c}=a;null==o||o.logger.log({appId:s,widget_id:p,instance_id:r,src:42,evid:644,tts:l,pid:d?d.pageId:null,stage:u,stageNum:c,pn:n.getPageNumber()},{endpoint:"ugc-viewer"})}})}))),Ne=(0,s.ff)([(0,s.t6)(p.R9,u.u2),Ue.s,Me.jj,(0,s.jt)(Te.R1),(0,s.jt)(_e.$)],(({debug:e},t,i,n,o)=>({getTpaHandlers:()=>({applicationLoaded(r,a,{appDefinitionId:s,tpaCompData:{widgetId:p}={}}){if(g.isRuntimeCompId(r))return void(e&&console.warn(`applicationLoaded is ignored in runtime component ${r}`));const d=i.getCurrentRouteInfo(),l=Date.now()-t.initialRequestTimestamp;null==o||o.logger.log({appId:s,widget_id:p,instance_id:r,src:42,evid:643,tts:l,pid:d?d.pageId:null,pn:n.getPageNumber()},{endpoint:"ugc-viewer"})}})})));var Be=i(2811);const Fe=(0,s.ff)([Be.n9,l.PV],((e,t)=>({getTpaHandlers:()=>({refreshCurrentMember(){return(0,a.mG)(this,void 0,void 0,(function*(){const i=yield e.getMemberDetails(!0);i&&t.dispatch("MEMBER_DETAILS_UPDATED",(()=>i))}))}})}))),Ge=(0,s.ff)([l.jn,l.R3],(({openPopup:e},t)=>{const i=e=>{if(t.isModal(e)){const e=new Error("An app can not open a popup from a modal.");return e.name="Operation not supported",e}return null};return{getTpaHandlers:()=>({openPopup:(0,xe.u)(["site","preview"],((t,n,{originCompId:o})=>{var{url:r}=n,s=(0,a._T)(n,["url"]);const p=i(t);return p?Promise.reject(p):e(r,s,o)})),openPersistentPopup:(0,xe.u)(["site","preview"],((t,n,{originCompId:o})=>{var{url:r}=n,s=(0,a._T)(n,["url"]);const p=i(t);return p?Promise.reject(p):e(r,Object.assign(Object.assign({},s),{persistent:!0}),o)}))})}})),Ve=(0,s.ff)([De.X],(e=>({getTpaHandlers:()=>({getAppVendorProductId(t,{appDefinitionId:i}){var n,o;const r=null===(n=e.getAppInstanceByAppDefId(i))||void 0===n?void 0:n.replace(/^[^.]+./,"");if(!r)return null;return(null===(o=JSON.parse(atob(r)))||void 0===o?void 0:o.vendorProductId)||null}})})));var We=i(8562);const ze=e=>_().isNumber(e)?e:NaN,Ze=e=>_().parseInt((e||"").toString().split("px")[0]),Qe=e=>{const t={size:0,unit:""};return _().isNumber(e)?t.size=e:_().isString(e)&&(t.unit=(e=>{const t=/(%)$/.exec(e);return t&&t[1]?t[1]:""})(e),t.size=(e=>{const t=/^([0-9]+)/.exec(e);return t&&t[1]?parseInt(t[1],10):0})(e)),t},Ke=({width:e,height:t},i)=>"100%"===t&&("100%"===e||Number(Ze(e))>=i.innerWidth),Xe=(e,t,i)=>{const n=(0,We.yF)(t)?null:t.document.getElementById(i),o=n?n.getBoundingClientRect():null,r=(e=>{let t=0,i=0;if(e&&e.offsetParent){let n=e;do{t+=n.offsetLeft,i+=n.offsetTop}while(n=n.offsetParent)}return{top:i,left:t}})(n),a={left:r.left,top:r.top,width:o?Math.round(o.width):0,height:o?Math.round(o.height):0,actualTop:o?o.top:0,actualLeft:o?o.left:0},s=_().defaults(e.position,{x:0,y:0,origin:"FIXED",placement:"CENTER"}),p=_().pick(e,"height","width"),d={width:(0,We.yF)(t)?0:t.innerWidth,height:(0,We.yF)(t)?0:t.innerHeight},l={RELATIVE:()=>((e,t,i,n)=>{const o=function(e,t,i){return e+t/2-i/2},r=function(e,t,i){return e-(t+i)},a=function(e,t,i){return e-(t+i)},s=function(e,t,i){return e+t/2-i/2},p=ze(n.height),d=ze(n.width),l={CENTER:()=>({height:_().min([p,i.height]),width:_().min([d,i.width]),top:s(t.top,t.height,p),left:o(t.left,t.width,d)}),TOP_LEFT:()=>({height:_().min([p,t.top]),width:_().min([d,t.left]),top:t.top-p,left:t.left-d}),TOP_RIGHT:()=>({height:_().min([p,t.top]),width:_().min([d,a(i.width,t.width,t.left)]),top:t.top-p,left:t.width+t.left}),TOP_CENTER:()=>({height:_().min([p,t.top]),width:_().min([d,i.width]),top:t.top-p,left:o(t.left,t.width,d)}),CENTER_RIGHT:()=>({height:_().min([p,i.height]),width:_().min([d,a(i.width,t.width,t.left)]),top:s(t.top,t.height,p),left:t.width+t.left}),CENTER_LEFT:()=>({height:_().min([p,i.height]),width:_().min([d,t.left]),top:s(t.top,t.height,p),left:t.left-d}),BOTTOM_LEFT:()=>({height:_().min([p,r(i.height,t.top,t.height)]),width:_().min([d,t.left]),top:t.top+t.height,left:t.left-d}),BOTTOM_RIGHT:()=>({height:_().min([p,r(i.height,t.top,t.height)]),width:_().min([d,a(i.width,t.width,t.left)]),top:t.top+t.height,left:t.width+t.left}),BOTTOM_CENTER:()=>({height:_().min([p,r(i.height,t.top,t.height)]),width:_().min([d,i.width]),top:t.top+t.height,left:o(t.left,t.width,d)})}[e.placement](),u=_().max([0,l.top]),c=_().max([0,l.left]);return Object.assign(Object.assign(Object.assign({},{position:"absolute",display:"block",width:0,height:0}),l),{top:u,left:c})})(s,a,d,p),ABSOLUTE:()=>((e,t,i,n)=>{const o=ze(n.height),r=ze(n.width),a={CENTER:()=>{const n=_().min([t.actualTop+e.y,i.height-(t.actualTop+e.y)]),a=_().min([t.actualLeft+e.x,i.width-(t.actualLeft+e.x)]);return{height:_().min([o,2*n]),width:_().min([r,2*a]),top:t.top+e.y-o/2,left:t.left+e.x-r/2}},TOP_LEFT:()=>({height:_().min([o,t.actualTop+e.y]),width:_().min([r,t.actualLeft+e.x]),top:t.top+e.y-o,left:t.left+e.x-r}),TOP_RIGHT:()=>({height:_().min([o,t.actualTop+e.y]),width:_().min([r,i.width-(t.actualLeft+e.x)]),top:t.top+e.y-o,left:t.left+e.x}),TOP_CENTER:()=>{const n=_().min([t.actualLeft+e.x,i.width-(t.actualLeft+e.x)]);return{height:_().min([o,t.actualTop+e.y]),width:_().min([r,2*n]),top:t.top+e.y-o,left:t.left+e.x-r/2}},CENTER_RIGHT:()=>{const n=_().min([t.actualTop+e.y,i.height-(t.actualTop+e.y)]);return{height:_().min([o,2*n]),width:_().min([r,i.width-(t.actualLeft+e.x)]),top:t.top+e.y-o/2,left:t.left+e.x}},CENTER_LEFT:()=>{const n=_().min([t.actualTop+e.y,i.height-(t.actualTop+e.y)]);return{height:_().min([o,2*n]),width:_().min([r,t.actualLeft+e.x]),top:t.top+e.y-o/2,left:t.left+e.x-r}},BOTTOM_LEFT:()=>({height:_().min([o,i.height-e.y]),width:_().min([r,t.actualLeft+e.x]),top:t.top+e.y,left:t.left+e.x-r}),BOTTOM_RIGHT:()=>({height:_().min([o,i.height-(t.actualTop+e.y)]),width:_().min([r,i.width-(t.actualLeft+e.x)]),top:t.top+e.y,left:t.left+e.x}),BOTTOM_CENTER:()=>{const n=_().min([t.actualLeft+e.x,i.width-(t.actualLeft+e.x)]);return{height:_().min([o,i.height-(t.actualTop+e.y)]),width:_().min([r,2*n]),top:t.top+e.y,left:t.left+e.x-r/2}}}[e.placement](),s=_().max([0,a.top]),p=_().max([0,a.left]);return Object.assign(Object.assign(Object.assign({},{position:"absolute",display:"block",width:0,height:0}),a),{top:s,left:p})})(s,a,d,p),FIXED:()=>((e,t,i)=>{const n={position:"fixed",display:"block",width:i.width,height:i.height},o=Qe(i.height);"%"===o.unit?o.size=_().min([o.size,100]):o.size>t.height&&(o.unit="%",o.size=100);const r=Qe(i.width);r.size="%"===r.unit?_().min([r.size,100]):_().min([r.size,t.width]);const a={CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),marginTop:"%"===o.unit?0:o.size/-2+(o.unit||"px"),left:"50%",top:"%"===o.unit?0:"50%"}),TOP_LEFT:()=>({left:"0px",top:"0px"}),TOP_RIGHT:()=>({right:"0px",top:"0px"}),TOP_CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),top:"0px",left:"50%"}),CENTER_RIGHT:()=>({marginTop:"%"===o.unit?0:o.size/-2+(o.unit||"px"),top:"%"===o.unit?0:"50%",right:"0px"}),CENTER_LEFT:()=>({marginTop:"%"===o.unit?0:o.size/-2+(o.unit||"px"),top:"%"===o.unit?0:"50%",left:"0px"}),BOTTOM_LEFT:()=>({bottom:"0px",left:"0px"}),BOTTOM_RIGHT:()=>({bottom:"0px",right:"0px"}),BOTTOM_CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),left:"50%",bottom:"0px"})};return n.width=r.size+(r.unit||"px"),n.height=o.size+(o.unit||"px"),Object.assign(Object.assign({},n),a[e.placement]())})(s,d,p)};return((e,t,i)=>{if(Ze(e.width)<10||Ze(e.height)<10){const e=Qe(i.height);e.size="%"===e.unit?_().min([e.size,100]):_().min([e.size,t.height]);const n=Qe(i.width);return n.size="%"===n.unit?_().min([n.size,100]):_().min([n.size,t.height]),{position:"fixed",display:"block",width:`${n.size}${n.unit||"px"}`,height:`${e.size}${e.unit||"px"}`,marginLeft:`${n.size/-2}${n.unit||"px"}`,marginTop:`${e.size/-2}${e.unit||"px"}`,left:"50%",top:"50%"}}return e})(l[s.origin](),d,p)};var qe=i(87821);const Je=(0,s.ff)([d.xP,r.ZQ,qe.x,(0,s.t6)(p.R9,u.u2),l.R3],((e,t,i,n,o)=>{const r=(r,a)=>{const{options:s,originCompId:p}=e.get(r),d=Object.assign(Object.assign({},s),a),l=o.isModal(r)?(e=>["height","width"].reduce(((t,i)=>{const n=e[i];if(!_().isNil(n)){const{unit:e,size:o}=Qe(n);e||(t[i]=o)}return t}),{}))(a):Xe(d,t,p);e.update({[r]:{styleOverrides:l}}),i.setSiteScrollingBlocked(n.isMobileView&&Ke(l,t),r)};return{getTpaHandlers:()=>({resizeWindow(t,i,{tpaCompData:n}){return(0,a.mG)(this,void 0,void 0,(function*(){g.isRuntimeCompId(t)?r(t,i):(null==n?void 0:n.isPinned)&&e.update({[t]:{styleOverrides:{width:_().isNumber(i.width)?`${i.width}px`:i.width,height:_().isNumber(i.height)?`${i.height}px`:i.height}}})}))},heightChanged(t,i,{tpaCompData:n}){if(g.isRuntimeCompId(t))r(t,{height:i.height});else{if(0===i.height&&!(null==n?void 0:n.isPinned))return;e.update({[t]:{heightOverride:i.height,heightOverflow:Boolean(i.overflow)}})}}})}})),Ye=(0,s.ff)([],(()=>({getTpaHandlers:()=>({onReady:()=>Promise.resolve()})})));var et=i(26064);const tt=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),(0,s.t6)(p.jC,l.u2),ke.q,Te.kc,u.B_,(0,s.jt)(we.wk),(0,s.jt)(be.HC),(0,s.jt)(et.M$),(0,s.jt)(k.d)],((e,t,n,o,r,{getTpaSectionByAppDefinitionId:s},p,d,l,u)=>({getTpaHandlers:()=>({navigateToSectionPage(c,g,{originCompId:m,appDefinitionId:f}){var I;return(0,a.mG)(this,void 0,void 0,(function*(){const{metaSiteId:c,userFileDomainUrl:v,routersConfig:P,appsClientSpecMapData:y,appsClientSpecMapByApplicationId:T,isMobileView:w,isPremiumDomain:b,experiments:C}=e,S=Object.entries(n.pagesData).reduce(((e,[t,i])=>(e[i.tpaApplicationId]||(e[i.tpaApplicationId]={}),e[i.tpaApplicationId][i.tpaPageId]=t,e)),{}),O=_()(n.pagesData).groupBy("tpaApplicationId").mapValues((e=>e.map((e=>e.id)))).value(),D=ye({routingInfo:r.getLinkUtilsRoutingInfo(),metaSiteId:c,userFileDomainUrl:v,routersConfig:P,popupPages:null==p?void 0:p.getPopupPages(),multilingualInfo:null==d?void 0:d.getMultilingualInfo(),isMobileView:w,isPremiumDomain:b,experiments:C}),{sectionIdentifier:{sectionId:x,noTransition:R=!1,appDefinitionId:E,queryParams:M={},state:A}={},state:L}=g,k=L||A,j=E?y[E].applicationId:($=m,t.widgets[$].applicationId);var $;const U=T[j];if(!U)return E?{error:{message:"Component was not found."}}:{error:{message:`Application with appDefinitionId "${E}" was not found on the site.`}};const H=O[j];if(!H||0===H.length)return{error:{message:`Page with app "${U.appDefinitionName}" was not found.`}};const N=x?S[j][x]:null;if(x&&!N)return{error:{message:`App page with sectionId "${x}" was not found.`}};const B={type:"DynamicPageLink",routerId:N||H[0],innerRoute:k,isTpaRoute:!0},F=(yield(e=>(0,a.mG)(this,void 0,void 0,(function*(){var t,n;const o=null==u?void 0:u.urlMappings;if(o){const{buildCustomizedUrl:r}=yield i.e(7482).then(i.bind(i,47194)),{key:a,variables:s,options:p}=(null===(n=null===(t=null==e?void 0:e.sectionIdentifier)||void 0===t?void 0:t.customizeTarget)||void 0===n?void 0:n.customUrlData)||{};if(a&&s)return r(o,a,s,p)}})))(g))||D.getLinkUrlFromDataItem(B);if(D.isDynamicPage(F))return{error:{message:"Can't navigate to a dynamic page. Please use the platform app API instead."}};const G=`${F}${_().isEmpty(M)?"":`?appSectionParams=${encodeURIComponent(JSON.stringify(M))}`}`,V=D.getLinkProps(G);R&&l&&l.disableNextTransition();if(!(yield o.navigateTo(V))){if(console.warn("You have invoked the navigateToSectionPage() API but you are already on the section page. Please use the pushState() API instead."),!1===(null===(I=g.sectionIdentifier)||void 0===I?void 0:I.shouldRefreshIframe))return h;const e=s(E||f);e&&e.rebuildSrc()}return h}))}})}))),it=(0,s.ff)([r.ZQ,(0,s.t6)(p.$e,l.u2)],((e,t)=>({getTpaHandlers:()=>({boundingRectAndOffsets(i){const n={offsets:{x:0,y:0},rect:{left:0,right:0,top:0,bottom:0,height:0,width:0},scale:t.siteScale},o=e.document.getElementById(i);if(!o)return n;const r=(()=>{if(!t.isFixedHeader)return 0;const i=e.document.getElementById("SITE_HEADER");return i&&i.getBoundingClientRect().height||0})(),a=o.getBoundingClientRect();return n.offsets={x:a.left+e.scrollX,y:a.top+e.scrollY-r},n.rect=_()(a).pick(["left","right","top","bottom","height","width"]).mapValues((e=>Math.floor(e))).value(),n.rect.top-=r,n}})})));var nt=i(21924);const ot=(0,s.ff)([(0,s.t6)(p.$e,l.u2),nt.QJ,r.EE],(({widgets:e},t,i)=>({getTpaHandlers(){return{setPageMetadata:(0,xe.u)(["site"],((n,o,{originCompId:r})=>(0,a.mG)(this,void 0,void 0,(function*(){if(!e[r]||!e[r].isSection){const e="Setting a page meta data is possible only to TPA Sections and MultiSections";return i.captureError(new Error(e),{tags:{feature:"tpa"}}),{error:{message:e}}}return yield t.setTPAOverrides(o),yield t.renderSEO(),null}))))}}}))),rt=(0,s.ff)([l.R3],(e=>({getTpaHandlers:()=>({openModal:(0,xe.u)(["site","preview"],((t,{url:i,theme:n,height:o,width:r})=>e.openModal(i,{width:r,height:o,theme:n},t)))})}))),at=(0,s.ff)([(0,s.t6)(p.R9,u.u2),ke.q,Te.kc,d.QZ,(0,s.jt)(we.wk),(0,s.jt)(be.HC),(0,s.jt)(et.M$)],((e,t,i,n,o,r,s)=>{const p=t=>{const{metaSiteId:n,userFileDomainUrl:a,routersConfig:s,isMobileView:p,isPremiumDomain:d,experiments:l}=e,u=ye({routingInfo:i.getLinkUtilsRoutingInfo(),metaSiteId:n,userFileDomainUrl:a,routersConfig:s,popupPages:null==o?void 0:o.getPopupPages(),multilingualInfo:null==r?void 0:r.getMultilingualInfo(),isMobileView:p,isPremiumDomain:d,experiments:l}),c=u.getLinkUrlFromDataItem(t);return u.getLinkProps(c)},d=({pageId:e,anchorId:n,noTransition:o})=>{const r=(({pageId:e,anchorId:t})=>{const n=p({type:"PageLink",pageId:e,target:"_self"});return t&&(i.getLinkUtilsRoutingInfo().pageId===e?n.anchorCompId=t:n.anchorDataId=t),n})({pageId:e,anchorId:n});return o&&s&&s.disableNextTransition(),t.navigateTo(r)};return{getTpaHandlers:()=>({navigateToPage(e,{pageId:t,anchorId:i,noTransition:n}){d({pageId:t,anchorId:i,noTransition:n})},navigateTo(e,{link:i}){if(i.type===P)return;const n=p(i);t.navigateTo(n)},navigateToAnchor(e,{anchorId:t}){return(0,a.mG)(this,void 0,void 0,(function*(){if(!(yield d({pageId:i.getLinkUtilsRoutingInfo().pageId,anchorId:t})))throw new Error(`anchor with id "${t}" was not found on the current page.`);return h}))},navigateToComponent(e,{compId:t,pageId:n,noPageTransition:o}){return(0,a.mG)(this,void 0,void 0,(function*(){const e=n||i.getLinkUtilsRoutingInfo().pageId;if(!(yield d({pageId:e,anchorId:t,noTransition:o})))throw new Error(`Page id "${e}" does not contain the component id "${t}".`);return h}))}})}})),st=(0,s.ff)([(0,s.t6)(p.R9,u.u2)],(({appsClientSpecMapData:e})=>({getTpaHandlers:()=>({getApplicationFields:(t,{appDefinitionId:i})=>e[i].appFields})})));var pt=i(21568),dt=i(12073);const lt=(0,s.ff)([pt.H,l.PV],((e,t)=>({getTpaHandlers:()=>({removeEventListener(i,{eventKey:n},{appDefinitionId:o}){n.startsWith(dt.$E)?e.unsubscribe(o,i,n):t.unregister(n,i)}})}))),ut=(0,s.ff)([pt.H],(e=>({getTpaHandlers:()=>({publish(t,i,{appDefinitionId:n}){e.publish(n,t,i)}})}))),ct=(0,s.ff)([De.X,l.PV],((e,t)=>({getTpaHandlers:()=>({revalidateSession(i,n,{appDefinitionId:o}){return(0,a.mG)(this,void 0,void 0,(function*(){yield e.loadNewSession();const i={instance:e.getAppInstanceByAppDefId(o)};return t.dispatch("INSTANCE_CHANGED",(()=>i),{appDefinitionId:o}),i}))}})})));var gt=i(24548),mt=i(46466);const ft=(0,s.ff)([(0,s.t6)(p.jC,l.u2),(0,s.t6)(p.$e,l.u2),mt.p,d.xP,gt.i],((e,{widgets:t},i,n,{getFontsConfig:o})=>({getTpaHandlers:()=>({appIsAlive(r,a,{originCompId:s}){const{siteColors:p,isVisualFocusEnabled:d,siteTextPresets:l}=e;n.update({[r]:{sentAppIsAlive:!0}});const u=t[s]||{style:{colors:{},numbers:{},booleans:{},fonts:{},googleFontsCssUrl:"",uploadFontFaces:""}};return Object.assign({fonts:o(),commonConfig:i.getCommonConfig(),isVisualFocusEnabled:d,siteColors:p,siteTextPresets:l},u)}})}))),ht=(0,s.ff)([l.PV,pt.H],((e,t)=>({getTpaHandlers:()=>({registerEventListener(i,{eventKey:n,receivePastEvents:o=!1},{callId:r,tpa:a,tpaCompData:{widgetId:s=""}={},appDefinitionId:p}){if(n.startsWith(dt.$E))t.handleIframeSubscribe(p,i,{eventKey:n,isPersistent:o,callId:r});else{const t=(e,t)=>{a.postMessage(JSON.stringify({intent:"addEventListener",eventType:e,params:t}),"*")};e.register(n,i,t,{widgetId:s,appDefinitionId:p})}}})}))),It=(0,s.ff)([l.R3,l.jn],((e,t)=>({getTpaHandlers:()=>({closeWindow:(i,n)=>A({tpaModal:e,tpaPopup:t,compId:i,onCloseMessage:n})})}))),vt=(0,s.ff)([Me.jj],(e=>({getTpaHandlers:()=>({getCurrentPageId:()=>e.getCurrentRouteInfo().pageId})})));var Pt=i(11717);const yt=(0,s.ff)([r.ZQ,(0,s.jt)(Pt.FK)],((e,t)=>({getTpaHandlers:()=>({scrollTo(i,{x:n,y:o,scrollAnimation:r}){return(0,a.mG)(this,void 0,void 0,(function*(){if(t)if(r){const i=1,r=0;(yield t.getInstance()).runAnimationOnElements("BaseScroll",[e],i,r,{y:o,x:n,callbacks:{onComplete:()=>Promise.resolve()}})}else e.scrollTo(n,o)}))}})}))),Tt=(0,s.ff)([r.ZQ],(e=>({getTpaHandlers:()=>({scrollBy(t,{x:i,y:n}){e.scrollBy(i,n)}})}))),wt=(0,s.ff)([(0,s.t6)(p.$e,l.u2)],(({widgets:e})=>({getTpaHandlers:()=>({getExternalId:(t,i,{originCompId:n})=>Promise.resolve(e[n].externalId)})}))),bt=(0,s.ff)([(0,s.t6)(p.$e,l.u2)],(({widgets:e,appPublicData:t})=>({getTpaHandlers:()=>({getValue(i,{key:n,scope:o},{originCompId:r}){const a=e[r].applicationId,s="APP"===o?t[a]:e[r].componentPublicData;return s&&s[n]?{[n]:s[n]}:{error:{message:`key ${n} not found in ${o} scope`}}}})}))),Ct=(0,s.ff)([(0,s.t6)(p.$e,l.u2)],(({widgets:e,appPublicData:t})=>({getTpaHandlers(){function i(i){const n=e[i].applicationId;return{APP:t[n],COMPONENT:e[i].componentPublicData}}return{getPublicData:(e,t,{originCompId:n})=>i(n),getValues(e,t,{originCompId:n}){const{scope:o,keys:r}=t,a=i(n);return _().pickBy(a[o],((e,t)=>r.includes(t)))}}}}))),St=(0,s.ff)([(0,s.t6)(p.$e,l.u2)],(({widgets:e})=>({getTpaHandlers:()=>({getStyleId:(t,i,{originCompId:n})=>e[n].styleId})}))),Ot=(0,s.ff)([(0,s.t6)(p.R9,u.u2)],(e=>({getTpaHandlers:()=>({getViewMode:()=>({editMode:e.viewMode})})}))),Dt=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2)],(({widgetsClientSpecMapData:e},{pageId:t})=>({getTpaHandlers:()=>({getComponentInfo(i,n,{tpaCompData:{widgetId:o=""}={}}){var r,a,s;const p="masterPage"===t;return{compId:i,showOnAllPages:p,pageId:p?"":t,tpaWidgetId:null===(r=e[o])||void 0===r?void 0:r.tpaWidgetId,appPageId:(null===(s=null===(a=e[o])||void 0===a?void 0:a.appPage)||void 0===s?void 0:s.id)||""}}})}))),xt=(0,s.ff)([(0,s.t6)(p.$e,l.u2),(0,s.t6)(p.jC,l.u2),(0,s.t6)(p.R9,u.u2)],(({widgets:e},{pagesData:t},{widgetsClientSpecMapData:i})=>({getTpaHandlers:()=>({isAppSectionInstalled(n,{sectionId:o,appDefinitionId:r},{originCompId:a}){var s;let p=null===(s=e[a])||void 0===s?void 0:s.applicationId;if(r){const e=_().find(i,{appDefinitionId:r});p=(null==e?void 0:e.applicationId)||p}const d=_().filter(t,{tpaApplicationId:Number(p)});return _().some(d,{tpaPageId:o})}})}))),Rt=(0,s.ff)([l.Cc],(({getSiteMap:e})=>({getTpaHandlers:()=>({getSitePages(t,{includePagesUrl:i}){return(0,a.mG)(this,void 0,void 0,(function*(){return(yield e()).map((e=>Object.assign({hide:e.hidden,id:_().isString(e.pageId)&&e.pageId.replace("#",""),isHomepage:e.isHomePage||!1,title:e.title},i&&{url:e.url})))}))},getSiteMap:e})}))),Et=(0,s.ff)([Te.Iz,Me.jj,(0,s.t6)(p.jC,l.u2),(0,s.t6)(p.R9,u.u2),r.ZQ],((e,t,{pagesData:i},{externalBaseUrl:n},o)=>({getTpaHandlers:()=>({siteInfo(){const{pageId:r}=t.getCurrentRouteInfo(),{href:a}=e.getParsedUrl(),{siteDescription:s,siteKeywords:p,title:d}=i[r];return{siteDescription:s,siteKeywords:p,baseUrl:n,pageTitle:o.document.title,pageTitleOnly:d,referer:o.document.referrer,url:a}}})}))),Mt=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.jC,l.u2)],(({externalBaseUrl:e},{pagesData:t})=>({getTpaHandlers:()=>({getSectionUrl(i,{sectionIdentifier:n},{appClientSpecMapData:o}){const r=_().find(t,{tpaPageId:n});return(null==r?void 0:r.id)?{url:`${e}/${r.pageUriSEO}`}:{error:{message:`Page with app "${null==o?void 0:o.appDefinitionName}" was not found.`}}}})}))),At=(0,s.ff)([l.u5],(e=>({getTpaHandlers:()=>({setFullScreenMobile(t,{isFullScreen:i}){return(0,a.mG)(this,void 0,void 0,(function*(){e.setFullScreenMobile(t,i)}))}})}))),Lt=()=>{},kt=(0,s.ff)([],(()=>({getTpaHandlers:()=>({getSiteRevision:Lt,getDeviceType:Lt,toWixDate:Lt,getCompId:Lt,getOrigCompId:Lt,getWidth:Lt,isInModal:Lt,getLocale:Lt,getCacheKiller:Lt,getTarget:Lt,getInstanceId:Lt,getSignDate:Lt,getUid:Lt,getPermissions:Lt,getIpAndPort:Lt,getDemoMode:Lt,getInstanceValue:Lt,getSiteOwnerId:Lt,getImageUrl:Lt,getResizedImageUrl:Lt,getAudioUrl:Lt,getDocumentUrl:Lt,getSwfUrl:Lt,getPreviewSecureMusicUrl:Lt,getStyleParams:Lt,getStyleColorByKey:Lt,getColorByreference:Lt,getSiteTextPresets:Lt,getFontsSpriteUrl:Lt,getStyleFontByKey:Lt,getStyleFontByReference:Lt,getSiteColors:Lt,getViewModeInternal:Lt,postMessage:Lt,getEditorFonts:Lt,setUILIBParamValue:Lt,removeAppMetadata:Lt,setAppMetadata:Lt,setColorParam:Lt,setStyleParam:Lt,resizeComponent:Lt,setValue:Lt,isSupported:Lt,appEngaged:Lt,getInstalledInstance:Lt,isApplicationInstalled:Lt,isCustomApplicationPermissionsGranted:Lt,isGroupApplicationPermissionsGranted:Lt,setFullWidth:Lt})})));var jt=i(42473);const $t=(0,s.ff)([(0,s.jt)(jt.I)],(e=>({getTpaHandlers:()=>({reportVisitorActivity:e?e.reportActivity:()=>{}})}))),Ut=(0,s.ff)([d.QZ,d.xP],((e,t)=>({getTpaHandlers:()=>({getCurrentPageAnchors:()=>_()(e.getEntireStore()).pickBy((({componentType:e})=>"Anchor"===e)).mapValues(((e,i)=>({id:i,title:t.get(i).name}))).values().sortBy((({id:e})=>{switch(e){case"SCROLL_TO_TOP":return 0;case"SCROLL_TO_BOTTOM":return 1;default:return 2}})).value()})})));var _t=i(19095);const Ht=(e,t,i)=>({error:{errorCode:e,message:t,error:i}}),Nt="BAD_REQUEST_ERROR",Bt="WIX_ERROR",Ft=e=>(...t)=>window.ApplePaySession?"function"==typeof e?e(...t):void 0:{error:{errorCode:"APPLE_PAY_IS_NOT_AVAILABLE_ERROR"}},Gt=[kt,ft,ht,It,vt,yt,Tt,wt,bt,Ct,ot,ct,Ot,St,Dt,xt,Et,ut,lt,Rt,st,rt,at,Fe,Mt,it,Ve,Je,Ye,tt,Ge,At,$t,$e,Ne,He,Le,Ee,Ae,Se,Re,Ce,Ut,$,j,L,(0,s.ff)([r.Zr],(({siteAssets:e})=>({getTpaHandlers(){return{applePayInvokeMethod:Ft(((e,t)=>(0,a.mG)(this,void 0,void 0,(function*(){if(!t.methodName)return Ht(Nt);switch(t.methodName){case"canMakePayments":try{return{result:window.ApplePaySession.canMakePayments()}}catch(e){return Ht(Bt,"ApplePaySession.canMakePayments() failed",e)}case"supportsVersion":try{return{result:window.ApplePaySession.supportsVersion(t.payload.version)}}catch(e){return Ht(Bt,`ApplePaySession.supportsVersion(${t.payload.version}) failed`,e)}default:return Ht(Nt)}})))),applePayStartSession:Ft(((t,{paymentRequest:i,applePayVersion:n,callbackApiId:o},r)=>(0,a.mG)(this,void 0,void 0,(function*(){try{const t=new window.ApplePaySession(n,i),s=yield(0,_t.FR)(e.clientTopology.moduleRepoUrl),p=window.document.querySelector(`#${r.originCompId} > iframe`);if(!p)return Ht(Bt,`Can not find a TPA iframe with id: ${r.originCompId}`);const d=yield s.api.request(o,{target:p});t.onvalidatemerchant=e=>(0,a.mG)(this,void 0,void 0,(function*(){const i=yield d.onValidateMerchant({validationURL:e.validationURL});return t.completeMerchantValidation(i)})),t.onshippingcontactselected=e=>(0,a.mG)(this,void 0,void 0,(function*(){const i=yield d.onShippingContactSelected({shippingContact:e.shippingContact});return Array.isArray(i.errors)&&(i.errors=i.errors.map((e=>{return t=e,new window.ApplePayError(t.code,t.contactField,t.message);var t}))),t.completeShippingContactSelection(i)})),t.onshippingmethodselected=e=>(0,a.mG)(this,void 0,void 0,(function*(){const i=yield d.onShippingMethodSelected({shippingMethod:e.shippingMethod});return t.completePaymentMethodSelection(i)})),t.onpaymentauthorized=e=>(0,a.mG)(this,void 0,void 0,(function*(){const i=yield d.onPaymentAuthorized({payment:e.payment});return t.completePayment(i)})),t.oncancel=()=>(0,a.mG)(this,void 0,void 0,(function*(){return yield d.onCancel()}));const{canceled:l}=yield d.onClick();if(l)return;t.begin()}catch(e){return Ht(Bt,null==e?void 0:e.message,e)}}))))}}})))],Vt={STATE_CHANGED:"STATE_CHANGED",INSTANCE_CHANGED:"INSTANCE_CHANGED",PAGE_NAVIGATION:"PAGE_NAVIGATION",MEMBER_DETAILS_UPDATED:"MEMBER_DETAILS_UPDATED",CONSENT_POLICY_UPDATE:"CONSENT_POLICY_UPDATE",SCROLL:"SCROLL",QUICK_ACTION_TRIGGERED:"QUICK_ACTION_TRIGGERED",COMMON_CONFIG_UPDATE:"COMMON_CONFIG_UPDATE"},Wt=(0,s.ff)([(0,s.t6)(p.Wf,l.u2),(0,s.t6)(p.$e,l.u2),De.X],((e,t,i)=>{const n=(t,i,n=(()=>!0))=>{_().forEach(e.get().registry[t],((e,o)=>{if(!e)return;const{listener:r}=e,s=(0,a._T)(e,["listener"]),p=(d=n,_().isFunction(d)?d:e=>{const[t]=Object.keys(d);return e[t]===d[t]});var d;const l=Object.assign({compId:o},s);p(l)&&r(t,i(l))}))};return(e=>{e.update((e=>_().merge({},e,{registry:{}})))})(e),i.addLoadNewSessionCallback((({results:{instances:e},reason:t})=>{"expiry"===t&&n("INSTANCE_CHANGED",(({appDefinitionId:t})=>({instance:e[t]})))})),{register(i,n,o,r){(e=>e in Vt)(i)&&e.update((e=>_().merge({},e,{registry:{[i]:{[n]:Object.assign(Object.assign({},r),{pageId:t.pageId,listener:o})}}})))},unregister(t,i){e.update((e=>_().set(e,["registry",t,i],null)))},dispatch:n}}));var zt=i(44263);const Zt=(0,s.ff)([l.TJ,De.X,r.ZQ],((e,t,i)=>{const{resolver:n,promise:o}=(0,zt.w)();return Object.assign(Object.assign({},e),{pageDidMount(){n(),t.addLoadNewSessionCallback(e.refreshAllPopups)},pageDidUnmount(){e.closeNonPersistentPopups()},openPopup(...t){return(0,a.mG)(this,void 0,void 0,(function*(){if(!(0,We.yF)(i))return yield o,e.openPopup(...t)}))}})}));var Qt=i(98118);const Kt=(0,s.ff)([d.xP,d.QZ,(0,s.t6)(p.Wf,l.u2),(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.jC,l.u2),(0,s.t6)(p.$e,l.u2),De.X,r.ZQ,qe.x,Qt.ku,u.RN,u.ex,pt.H],((e,t,i,n,o,r,s,p,d,l,u,c,m)=>{const f={},h=e=>{i.update((t=>{var i;return Object.assign(Object.assign({},t),{tpaPopup:{persistentPopups:e,popups:(null===(i=null==t?void 0:t.tpaPopup)||void 0===i?void 0:i.popups)||{}}})}))},I=e=>{i.update((t=>{var i;return Object.assign(Object.assign({},t),{tpaPopup:{popups:e,persistentPopups:(null===(i=null==t?void 0:t.tpaPopup)||void 0===i?void 0:i.persistentPopups)||{}}})}))},v=()=>_().get(i.get(),["tpaPopup","popups"],{}),P=()=>_().get(i.get(),["tpaPopup","persistentPopups"],{}),y=new RegExp(g.buildRuntimeCompId("tpapopup-[0-9]+",".+"));return{isPopup:e=>y.test(e),refreshAllPopups:()=>{Object.values(P()).forEach((({refreshPopUp:e})=>e())),Object.values(f).forEach((({refreshPopUp:e})=>e()))},closeNonPersistentPopups:()=>Object.values(f).forEach((({closePopup:e})=>{e()})),openPopup(i,s,y){const{isMobileView:T,isMobileDevice:w,previewMode:b,viewMode:C}=n,{masterPageTpaComps:S}=o,{widgets:O,pageId:D}=r;return new Promise((n=>(0,a.mG)(this,void 0,void 0,(function*(){const o=g.buildRuntimeCompId(`tpapopup-${Date.now()}`,g.getOriginCompId(y)),r=y&&t.getContextIdOfCompId(y)||l;c.registerTpasForContext({contextId:r,pageId:D},[o]);const a=e=>{if(s.persistent){const e=P();delete e[o],h(e)}else delete f[o],I(_().omit(v(),o));t.removeComponentFromDynamicStructure(o),d.setSiteScrollingBlocked(!1,o),s.persistent||m.clearListenersByCompId(o),n(e)},x=e=>/^0(?:px|%)?$/.test(`${e}`),R=w&&b&&!x(s.width)&&!x(s.height)?{position:"fixed",width:"319px",height:"512px",marginLeft:0,marginTop:0,boxShadow:"none",left:"50%",transform:"translateX(-50%)",top:0}:{},E=Object.assign(Object.assign({},Xe(s,p,y)),R),M=()=>{const e=O[y]||S[y];return u.buildSrc(o,D,e,i,{extraQueryParams:{isInPopup:"true",origCompId:y,viewMode:C}})},A={options:s,originCompId:y,src:M(),styleOverrides:E,isBareTheme:"BARE"===s.theme,closePopup:a};e.update({[o]:A}),d.setSiteScrollingBlocked(T&&Ke(E,p),o),yield t.addComponentToDynamicStructure(o,{components:[],componentType:"TPAPopup"});const L={isPersistent:s.persistent,closePopup:a,refreshPopUp:()=>{(O[y]||S[y])&&e.update({[o]:{src:M()}})}};L.isPersistent?h(Object.assign(Object.assign({},P()),{[o]:L})):(f[o]=L,I(Object.assign(Object.assign({},v()),{[o]:L})))}))))},closePopup(e,t){const i=P()[e]||v()[e];i&&i.closePopup(t)},getOpenedPopups:()=>Object.assign(Object.assign({},P()),f)}})),Xt=(0,s.ff)([(0,s.t6)(p.Wf,l.u2),(0,s.jt)(r.mS),r.Zr],((e,t,{siteAssets:i,mode:{debug:n}})=>{const{promise:o,resolver:r}=(0,zt.w)();e.update((()=>Object.assign(Object.assign({},e.get()),{publicApiTPAHandlerState:{resolvePublicApiGetter:r,waitForAppsToRegister:o}})));return{pageWillUnmount(){e.update((()=>Object.assign(Object.assign({},e.get()),{publicApiTPAHandlerState:null})))},getTpaHandlers:()=>({waitForWixCodeWorkerToBeReady:()=>{const o=e.get().publicApiTPAHandlerState;if(o.wixCodeWorkerReadyPromise)return o.wixCodeWorkerReadyPromise;const r=(0,a.mG)(void 0,void 0,void 0,(function*(){n&&console.warn("getPublicApi() has high performance overhead as we download and execute all apps on site. consider mitigating this by e.g migrating to Wix Blocks or OOI.");const[o,r,a]=yield Promise.all([(0,_t.FR)(i.clientTopology.moduleRepoUrl),t.platformWorkerPromise,e.get().publicApiTPAHandlerState.waitForAppsToRegister]),s=yield a();if(!s.length){const e="getPublicApi() rejected since there are no platform apps on page";throw n&&console.warn(e),new Error(e)}return yield Promise.all(s.map((e=>o.api.request(e,{target:r}).then((t=>{o.api.set(e,t)}))))),{}}));return e.update((()=>Object.assign(Object.assign({},e.get()),{publicApiTPAHandlerState:Object.assign(Object.assign({},o),{wixCodeWorkerReadyPromise:r})}))),r}}),getSdkHandlers:()=>({registerPublicApiGetter:t=>{var i;null===(i=e.get().publicApiTPAHandlerState)||void 0===i||i.resolvePublicApiGetter(t)}})}}));var qt=i(51831);const Jt=(e,t)=>{if((0,We.yF)(e))return;const i=document.getElementById("site-root");i&&(t?(i.style.setProperty("overflow-y","hidden"),i.style.setProperty("height","0")):(i.style.removeProperty("overflow-y"),i.style.removeProperty("height")))},Yt="tpaModal",ei=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.jC,l.u2),(0,s.t6)(p.$e,l.u2),(0,s.t6)(p.Wf,l.u2),d.xP,r.ZQ,qe.x,d.QZ,De.X,Qt.ku,u.RN,u.ex],((e,{masterPageTpaComps:t},i,n,o,r,s,p,d,l,u,c)=>{let m=()=>{};const f=e=>{n.update((t=>Object.assign(Object.assign({},t),{tpaModal:Object.assign(Object.assign({},(null==t?void 0:t.tpaModal)||{}),{closeModalImpl:e})})))},h=e=>{n.update((t=>Object.assign(Object.assign({},t),{tpaModal:Object.assign(Object.assign({},(null==t?void 0:t.tpaModal)||{}),{currentModalId:e})})))},I=()=>_().get(n.get(),["tpaModal","closeModalImpl"],(()=>{})),v=(e,t,i)=>{const n={width:r.innerWidth,height:r.innerHeight};if(e=Math.min(e,n.width),t=Math.min(t,n.height),!i){const i=n.width-50,o=n.height-50;e>=i&&t>=o&&(e=i,t=o)}return{width:e,height:t}},{resolver:P,promise:y}=(0,zt.w)();return{pageDidMount(){P()},isModal:e=>e.startsWith(Yt),openModal(n,{width:d,height:P,title:T,theme:w},b){if((0,We.yF)(r))return new Promise((()=>{}));let C;const{tpaModalConfig:S,isMobileDevice:O,previewMode:D,viewMode:x}=e,{pageId:R,widgets:E}=i,{wixTPAs:M}=S,A=g.buildRuntimeCompId(Yt,g.getOriginCompId(b||R)),L=b&&p.getContextIdOfCompId(b)||l;c.registerTpasForContext({contextId:L,pageId:R},[A]),I()(),(0,qt.U)();const k=b?o.get(b):null,j=M[k?k.applicationId:null],$=()=>{const e=v(d,P,j);o.update({[A]:{width:e.width,height:e.height}})};return r.addEventListener("resize",$),O&&s.setSiteScrollingBlocked(!0,A),new Promise((e=>(0,a.mG)(this,void 0,void 0,(function*(){yield y,h(A),f((t=>{f((()=>{})),r.removeEventListener("resize",$),(0,qt.i)(),m(),O&&(s.setSiteScrollingBlocked(!1,A),Jt(r,!1)),p.removeComponentFromDynamicStructure(A),o.update({[A]:{src:null,closeModal:()=>{}}}),null==C||C.focus(),C=null,h(null),e(t)})),m=(e=>{if((0,We.yF)(r))return()=>{};const t=t=>{"Escape"===t.key&&e()};return r.addEventListener("keydown",t),()=>r.removeEventListener("keydown",t)})(I()),O&&"LIGHT_BOX"===w&&Jt(r,!0);const i=v(d,P,j),a=b&&(E[b]||t[b])||{},l=u.buildSrc(A,R,a,n,{extraQueryParams:{isInModal:"true",origCompId:b,viewMode:x}});o.update({[A]:{src:l,width:i.width,height:i.height,closeModal:I(),isMobileDevice:O,isPreviewMode:D,title:T,theme:w}}),C=document.activeElement,yield p.addComponentToDynamicStructure(A,{components:[],componentType:"TPAModal"})}))))},closeModal(e){I()(e)},getCurrentModalId:()=>_().get(n.get(),["tpaModal","currentModalId"],null)}}));var ti=i(44041),ii=i(96114),ni=i.n(ii);const oi=(0,s.ff)([ti.r,l.PV,Qt.C9],(({registerToThrottledScroll:e},t,i)=>({pageWillMount(){e((e=>{ni().measure((()=>{t.dispatch("SCROLL",(({compId:t})=>((e,t)=>{const i=window.document.getElementById(t);if(!i)return{};const n=i.getBoundingClientRect();return{x:e.x+n.left,y:e.y+n.top,width:n.width,height:n.height,scrollTop:e.y,scrollLeft:e.x,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth}})(e,t)),{pageId:i})}))}))}})));var ri=i(27227),ai=i(99708);const si=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),d.xP,r.ZQ,ri.l],(({widgetsClientSpecMapData:e,isMobileView:t},{widgets:i},n,o,r)=>{const a=e=>{(e=>{if((0,We.yF)(e))return;["fullScreenMode"].forEach((e=>document.body.classList.add(e)))})(o),Jt(o,!0),r.set({[`${e}-pinned-layer`]:{"z-index":"var(--above-all-z-index) !important"}}),n.update({[e]:{iOSVersion:(0,ai.oK)(o),isMobileFullScreenMode:!0}})},s=e=>{(e=>{(0,We.yF)(e)||document.body.classList.remove("fullScreenMode")})(o),Jt(o,!1);const t=`${e}-pinned-layer`,i=r.getCompStyle(t);var a,s;r.set({[t]:(a=i,s="z-index",Object.keys(a).reduce(((e,t)=>(t!==s&&(e[t]=a[t]),e)),{}))}),n.update({[e]:{isMobileFullScreenMode:!1}})};return{setFullScreenMobile(n,o){if(!t)throw new Error("show full screen is only available in Mobile view");(t=>{const n=i[t]||{},{appDefinitionId:o}=e[n.widgetId]||{};return Object.values(I).includes(o)})(n)&&(o?a(n):s(n))}}})),pi=(0,s.ff)([mt.p,l.PV],((e,t)=>({pageWillMount:()=>{e.registerToCommonConfigChange((e=>t.dispatch("COMMON_CONFIG_UPDATE",(()=>e))))}}))),di=(0,s.ff)([l.PV,Me.jj],((e,t)=>({appDidLoadPage({pageId:i}){var n,o;const r=null===(n=t.getPreviousRouterInfo())||void 0===n?void 0:n.pageId;if(!r||r===i)return;const a={fromPage:r,toPage:i},s=null===(o=t.getCurrentRouteInfo().dynamicRouteData)||void 0===o?void 0:o.publicData;s&&(a.routerPublicData=s),e.dispatch("PAGE_NAVIGATION",(()=>a))}}))),li=(e,t)=>ui(t)&&t.templateId||e,ui=({isResponsive:e,widgetId:t})=>e&&"14517f3f-ffc5-eced-f592-980aaa0bbb5c"===t,ci=(0,s.ff)([d.xP,(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),De.X,Qt.ku,u.ex,l.nV],((e,{widgetsClientSpecMapData:t},i,n,o,r,s)=>{const{widgets:p,tpaInnerRouteConfig:d,pageId:l}=i,u=Object.entries(p).map((([e,t])=>{const i=li(e,t);return e!==i&&r.registerTpaTemplateId(i,e),i}));r.registerTpasForContext({contextId:o,pageId:l},u);const c=t=>{const n=s.buildSrc({compId:t,tpaCompData:p[t],pageId:i.pageId,tpaInnerRouteConfig:d});e.update({[t]:{src:n}})},g=()=>{const e=_().pickBy(p,(({widgetId:e,isOOI:i})=>!i&&t[e]));Object.keys(e).forEach(c)};return{pageWillMount(){return(0,a.mG)(this,void 0,void 0,(function*(){n.addLoadNewSessionCallback((({reason:e})=>{"memberLogin"===e&&g()}))}))},rebuildTpasSrc:g,rebuildTpaSrc:c}}));var gi=i(65070);const mi=(0,s.ff)([l.PV,Te.Iz,(0,s.t6)(p.$e,l.u2),Qt.C9],((e,t,{tpaInnerRouteConfig:i},n)=>({onUrlChange(){const o=t.getRelativeUrl(),r=(0,gi._)(o.replace(/^\./,""),i.tpaPageUri),a=r?r.join("/"):"";e.dispatch("STATE_CHANGED",(()=>({newState:a})),{pageId:n})}}))),fi=(0,s.ff)([d.xP,d.QZ,l.PV,Me.jj,r.ZQ,Qt.C9,l.jn,l.e4],((e,t,i,n,o,r,{getOpenedPopups:a},{rebuildTpasSrc:s})=>{const p={previousCurrency:null};return{onUrlChange(e){if(!n.getCurrentRouteInfo())return;const t=e.searchParams.get("currency");t!==p.previousCurrency&&(s(),Object.values(a()).forEach((e=>e.refreshPopUp())),p.previousCurrency=t)}}})),hi=(0,s.ff)([(0,s.t6)(p.R9,u.u2),u.RN],(({widgetsClientSpecMapData:e,deviceType:t,isMobileView:i},n)=>({buildSrc({compId:i,tpaCompData:o,pageId:r,tpaInnerRouteConfig:a}){const s=li(i,o),{widgetId:p}=o,{widgetUrl:d,mobileUrl:l}=e[p],u="mobile"===t&&l||d,c=ui(o)?"masterPage":r,g={};return o.isSection&&(g.tpaInnerRouteConfig=a),n.buildSrc(s,c,o,u,g)},getDefaultProps(t,n){var o;const{appDefinitionName:r,appDefinitionId:a,appPage:s,allowScrolling:p}=e[t];return{title:null!==(o=s.name)&&void 0!==o?o:r,appDefinitionName:r,appDefinitionId:a,isMobileView:i,allowScrolling:p,reportIframeStartedLoading:n||_().noop}}})));var Ii=i(65482);const vi=["TPASection","TPAMultiSection","TPAGluedWidget","TPAWidget"];var Pi=i(30516);const yi=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),l.nV,u.B_,u.lP,(0,s.jt)(l.Wt),(0,s.jt)(u.yA)],(({widgetsClientSpecMapData:e},t,i,{registerTpaSection:n,unregisterTpaSection:o},r,a,s)=>({componentTypes:vi,componentWillMount(p){const{widgets:d,tpaInnerRouteConfig:l,pageId:u}=t,c=d[p.id]||d[(0,Pi.is)(p.id)],{widgetId:g,isSection:m,appDefinitionId:f,templateId:h}=c;if(!e[g])return;s&&s.registerToDataCapsule(h||p.id,f);const I=()=>i.buildSrc({compId:p.id,tpaCompData:c,pageId:u,tpaInnerRouteConfig:l});if(m){const e={appDefinitionId:f,rebuildSrc:()=>{p.updateProps({src:I()})}};n(p.id,e)}const v=_().once((()=>{a&&a.reportIframeStartedLoading(p.id)})),P=i.getDefaultProps(g,v),y=li(p.id,c),T=r?r.getCachedProps(y):{};return p.updateProps(Object.assign(Object.assign(Object.assign({},P),{src:I()}),T)),()=>{r&&("masterPage"===u?r.cacheProps(p.id):ui(c)&&r.cacheProps(y,p.getProps())),o(p.id),s&&s.unregister(h||p.id)}}}))),Ti=(0,s.ff)([(0,s.t6)(p.R9,u.u2),(0,s.t6)(p.$e,l.u2),Me.jj,Ue.s,_e.$,Te.R1],(({widgetsClientSpecMapData:e},{widgets:t},i,n,o,r)=>({reportIframeStartedLoading(a){const{widgetId:s,templateId:p}=t[a]||t[(0,Pi.is)(a)],d=i.getCurrentRouteInfo(),l=Date.now()-n.initialRequestTimestamp;o.logger.log({appId:e[s].appDefinitionId,widget_id:s,instance_id:null!=p?p:a,src:42,evid:642,tts:l,pid:d?d.pageId:null,pn:r.getPageNumber()},{endpoint:"ugc-viewer"})}}))),wi="$TPA$",bi={[v]:["type","pageId"],[P]:["type","target","url"],[y]:["type","anchorName","anchorDataId","pageId"],[T]:["type","recipient","subject"],[w]:["type","phoneNumber"],[b]:["type","phoneNumber"],[C]:["type","docId","name"],[S]:["type","routerId","innerRoute","anchorDataId"],[O]:["type","address"]};function Ci(e,t,i,n){const o=e.label||"",r=!e.isVisible||!1,a=e.link?function(e){const t=_().pick(e.link,bi[e.link.type]);if(_().isObject(t.pageId)&&(t.pageId=`#${_().get(t,"pageId.id")}`),t.anchorDataId){const e=_().get(t,"anchorDataId.id",t.anchorDataId);t.anchorDataId="SCROLL_TO_TOP"===e||"SCROLL_TO_BOTTOM"===e?e:`#${e}`}return t}(e):{},s=_().merge(a,{title:o,hidden:r});if(!s.type)return{type:D,hidden:r,title:o,subPages:s.subPages};if(s.type===C){const e=n.getLinkUrlFromDataItem(s),t=n.getLinkProps(e);s.url=t.href}else _().merge(s,Si(e,t,i));return s}function Si(e,t,i){var n,o,r,a;const s=null===(o=null===(n=e.link)||void 0===n?void 0:n.pageId)||void 0===o?void 0:o.pageUriSEO,p={isHomePage:(null===(a=null===(r=e.link)||void 0===r?void 0:r.pageId)||void 0===a?void 0:a.id)===t};return s&&_().assign(p,{url:i+"/"+s}),p}function Oi(e,t,i,n,o){const{externalBaseUrl:r,appsClientSpecMapByApplicationId:a,metaSiteId:s,userFileDomainUrl:p,routersConfig:d,isMobileView:l,isPremiumDomain:u,experiments:c}=t,g=i.getLinkUtilsRoutingInfo(),m=ye({routingInfo:g,metaSiteId:s,userFileDomainUrl:p,routersConfig:d,popupPages:null==n?void 0:n.getPopupPages(),multilingualInfo:null==o?void 0:o.getMultilingualInfo(),isMobileView:l,isPremiumDomain:u,experiments:c});return function({menuItems:e,mainPageId:t,baseUrl:i,linkUtils:n}){return _().map(e,(e=>{const o=Ci(e,t,i,n);if(o.type===v||o.type===D){const r=_().map(e.items,(e=>Ci(e,t,i,n)));_().size(r)>0&&_().assign(o,{subPages:r})}return o}))}({menuItems:_().filter(e,(({link:e})=>!function(e,t){var i,n;if(!t)return!1;if(t.type===v){let o=null===(i=t.pageId)||void 0===i?void 0:i.tpaPageId;const r=e[null===(n=t.pageId)||void 0===n?void 0:n.tpaApplicationId];if(r&&o){_().includes(o,wi)&&(o=o.substr(0,o.indexOf(wi)));const e=_().find(r.widgets,(e=>{var t;return(null===(t=e.appPage)||void 0===t?void 0:t.id)===o}));return null==e?void 0:e.appPage.hideFromMenu}}return!1}(a,e))),mainPageId:g.mainPageId,baseUrl:r,linkUtils:m})}const Di=(0,s.ff)([(0,s.t6)(p.R9,u.u2),Te.kc,Qt.cK,(0,s.jt)(we.wk),(0,s.jt)(be.HC)],((e,t,i,n,o)=>({getSiteMap:()=>(0,a.mG)(void 0,void 0,void 0,(function*(){return Oi(yield i.fetchResource("masterPage","siteMap"),e,t,n,o)}))}))),xi=e=>{e(l.nV).to(hi),e(l.Wt).to(Ti),e(n.j.PageWillMountHandler,l.e4).to(ci),e(Ii.Vx).to(yi),e(u.XA).to(x),e(o.g,r.CT,n.j.PageWillUnmountHandler).to(Xt),e(l.PV).to(Wt),e(n.j.AppDidLoadPageHandler).to(di),e(l.TJ).to(Kt),e(n.j.PageDidMountHandler,n.j.PageDidUnmountHandler,l.jn).to(Zt),e(l.Cc).to(Di),Gt.forEach((t=>{e(o.g).to(t)})),e(n.j.PageDidMountHandler,n.j.PageDidUnmountHandler).to(E),e(n.j.PageDidMountHandler,l.R3).to(ei),e(n.j.PageWillMountHandler).to(oi),e(l.u5).to(si),e(n.j.PageWillMountHandler).to(pi),e(Te.bV).to(mi),e(Te.bV).to(fi)}},65070:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});const n=(e,t)=>{const i=e.split("/"),n=i.indexOf(t||"");if(n<0||i[n]!==t)return null;const[,...o]=i.splice(n);return o}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpa.ea35d0d5.chunk.min.js.map